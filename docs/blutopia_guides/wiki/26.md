The Blutopia Guide to Blu-ray Remuxing
======================================

###### DRAFT DOCUMENT  
This guide is a work in progress.

Aims
----

To equip users with the knowledge and experience to become an advanced remuxer with the necessary skills to pass the BLURANiUM User Release Program.

A BLURANiUM approved remux aims to (i) provide the best possible home viewing and listening experience and (ii) serve as the ultimate source for an encode.

Table of Contents
-----------------

*   [0 Changelog](#0-changelog)
*   [1 Installation](#1-installation)
*   [2 Decrypt](#2-decrypt)
*   [3 Demux](#3-demux)
    *   [3.1 Demux BDs (1080p)](#31-demux-bds-1080p)
    *   [3.2 Demux DVDs](#32-demux-dvds)
    *   [3.3 Demux UHDBDs](#33-demux-uhdbds)
    *   [3.4 See also](#34-see-also)
*   [4 BDInfo](#4-bdinfo)
*   [5 Compare](#5-compare)
    *   [5.1 Find best video track](#51-find-best-video-track)
    *   [5.2 Find best audio track](#52-find-best-audio-track)
    *   [5.3 Collect all subtitles](#53-collect-all-subtitles)
    *   [5.4 See also](#54-see-also)
    *   [5.5 AviSynth+ script 1](#55-avisynth-script-1)
    *   [5.6 AviSynth+ script 2](#56-avisynth-script-2)
    *   [5.7 VapourSynth script 1](#57-vapoursynth-script-1)
    *   [5.8 VapourSynth script 2](#58-vapoursynth-script-2)
*   [6 Conversion](#6-conversion)
    *   [6.1 Convert lossless audio](#61-convert-lossless-audio)
    *   [6.2 Convert dual mono](#62-convert-dual-mono)
    *   [6.3 Convert text-based subtitles](#63-convert-text-based-subtitles)
    *   [6.4 Convert image-based subtitles (aka OCR)](#64-convert-image-based-subtitles-aka-ocr)
    *   [6.5 Tonemap HDR subtitles](#65-tonemap-hdr-subtitles)
*   [7 Chapters](#7-chapters)
    *   [7.1 Collect](#71-collect)
    *   [7.2 Check for accuracy](#72-check-for-accuracy)
    *   [7.3 See also](#73-see-also)
*   [8 Syncing](#8-syncing)
    *   [8.1 Sync audio to video with offset](#81-sync-audio-to-video-with-offset)
    *   [8.2 Sync chapters to scene-change frames](#82-sync-chapters-to-scene-change-frames)
    *   [8.3 Sync subtitles](#83-sync-subtitles)
    *   [8.4 Sync Kino Lorber BDs](#84-sync-kino-lorber-bds)
*   [9 Tag](#9-tag)
*   [10 Mux](#10-mux)
    *   [10.1 Import all the tracks](#101-import-all-the-tracks)
    *   [10.2 Order the tracks](#102-order-the-tracks)
        *   [10.2.1 Order the video](#1021-order-the-video)
        *   [10.2.2 Order the audio](#1022-order-the-audio)
        *   [10.2.3 Order the subtitles](#1023-order-the-subtitles)
    *   [10.3 Rename all the tracks](#103-rename-all-the-tracks)
        *   [10.3.1 Name the video](#1031-name-the-video)
        *   [10.3.2 Name the audio](#1032-name-the-audio)
            *   [10.3.2.1 Name older audio formats](#10321-name-older-audio-formats)
        *   [10.3.3 Name the subtitles](#1033-name-the-subtitles)
    *   [10.4 Set flags and add metadata](#104-set-flags-and-add-metadata)
        *   [10.4.1 Set flags](#1041-set-flags)
        *   [10.4.2 Set compression](#1042-set-compression)
        *   [10.4.3 Add additional metadata](#1043-add-additional-metadata)
    *   [10.5 Name the file](#105-name-the-file)
*   [11 Request approval](#11-request-approval)

## 0 Changelog

*   Version 0.1 - Created By Roardom and collaboration of Blutopia internals
    *   Initial release

## 1 Installation

* * *

All software used must be up to date.

#### For metadata extraction:

*   **BDInfo (GUI)**  
    [https://www.videohelp.com/software/BDInfo](https://www.videohelp.com/software/BDInfo)
*   **BDInfo (CLI)**  
    [https://github.com/zoffline/BDInfoCLI-ng/tree/UHD\_Support\_CLI/prebuilt](https://github.com/zoffline/BDInfoCLI-ng/tree/UHD_Support_CLI/prebuilt)
*   **MediaInfo**  
    [https://mediaarea.net/en/MediaInfo](https://mediaarea.net/en/MediaInfo)

#### For demuxing/remuxing:

*   **Eac3to** — extracts media tracks from BDMV  
    [https://www.videohelp.com/software/eac3to](https://www.videohelp.com/software/eac3to)
*   **StaxRip** — includes latest eac3to with updated codec DLLs  
    [https://github.com/staxrip/staxrip/releases](https://github.com/staxrip/staxrip/releases)
*   **MakeMKV** — rips UHD discs with Dolby Vision / demuxes audio of seamlessly branched UHDBD discs  
    [https://www.makemkv.com/](https://www.makemkv.com/)
*   **DGDemux** — rips seamlessly branched UHDBDs most reliably  
    [http://rationalqm.us/dgdemux/dgdemux.html](http://rationalqm.us/dgdemux/dgdemux.html)
*   **Process Monitor** — helps demux finicky discs  
    [https://docs.microsoft.com/en-us/sysinternals/downloads/procmon](https://docs.microsoft.com/en-us/sysinternals/downloads/procmon)

#### For playback:

*   **Media player environment (MPC-HC)** — Open source media player for Windows.  
    [https://codecguide.com/features\_mega.htm](https://codecguide.com/features_mega.htm)
*   **VLC** — Cross platform media player, which can also open BD and DVD menus.  
    [https://www.videolan.org/vlc/index.html](https://www.videolan.org/vlc/index.html)
*   **DVDFab Player** — Proprietary media player for Windows/Mac with menu support for UHD Blu-rays.
*   **Java Runtime Environment** — Used to view Blu-ray menus in VLC.

#### For losslessly encoding audio:

*   **Dolby Media Producer Suite**
*   **DTS Master Audio Suite**

#### For analysing video:

*   **AviSynth+** — Frameserver which runs AviSynth+ scripts.  
    [https://github.com/AviSynth/AviSynthPlus/releases](https://github.com/AviSynth/AviSynthPlus/releases))
    
*   **AVSPmod** — Text editor which also allows previewing AviSynth+ scripts.  
    [https://www.videohelp.com/software/AvsP](https://www.videohelp.com/software/AvsP))
    
*   **ffms2** — Frame-accurate video reader for AviSynth+.
    
    Choose the preceeding three **OR** the following four.
    
*   **VapourSynth** — Frameserver which runs VapourSynth scripts.  
    [https://www.vapoursynth.com/doc/installation.html](https://www.vapoursynth.com/doc/installation.html)
    
*   **VSEdit** — Text editor which also allows previewing VapourSynth scripts.  
    [https://bitbucket.org/mystery\_keeper/vapoursynth-editor/downloads/](https://bitbucket.org/mystery_keeper/vapoursynth-editor/downloads/)
    
*   **btpfunc** — Collection of useful VapourSynth functions.  
    [https://github.com/Kevlar604/btpfunc](https://github.com/Kevlar604/btpfunc)
    
*   **L-SMASH** — Frame-accurate video reader for VapourSynth.  
    [https://github.com/HolyWu/L-SMASH-Works/releases/](https://github.com/HolyWu/L-SMASH-Works/releases/)
    

#### For analysing audio:

*   **Audacity** — For viewing digital waveforms.  
    [https://www.audacityteam.org/download/](https://www.audacityteam.org/download/)
*   **Adobe Audition** — Generates spectrograms, frequency response data, and amplitude statistics.
*   **SoX** — Cross platform CLI program for generating spectrograms.  
    [https://sourceforge.net/projects/sox/files/sox/14.4.2/](https://sourceforge.net/projects/sox/files/sox/14.4.2/)
*   **TT Dynamic Range Meter** — For measuring dynamic range.  
    [http://dr.loudness-war.info/downloads/DR-Meter-1\_4a.zip](http://dr.loudness-war.info/downloads/DR-Meter-1_4a.zip)

#### For editing/converting subtitles:

*   **BDSup2Sub** — Edits/converts retail subtitles.  
    Included with StaxRip
*   **SubtitleEdit** — Edits/converts text-based subtitles.  
    [https://github.com/SubtitleEdit/subtitleedit/releases](https://github.com/SubtitleEdit/subtitleedit/releases))
*   **subtitle\_tonemap** — Tonemaps SDR-PGS subtitles to make them suitable for HDR video sources.  
    [https://github.com/quietvoid/subtitle\_tonemap/releases/](https://github.com/quietvoid/subtitle_tonemap/releases/))

## 2 Decrypt

* * *
2 Decrypt

Skip to [step 3 (Demux)](#3-demux) if you don't need to rip a physical disc.

Otherwise, first follow the [Full Disc Ripping Guide](25.md).

## 3 Demux

* * *

Subject to the exceptions below, you should use Eac3to to demux the disc. To date, it is still the best demuxer in terms of error detection and correction capabilities which is essential if a disc has mastering or manufacturing errors.

Exception: Since eac3to is unable to process PTS timing correctly on HEVC video, you must use DGDemux or MakeMKV for UHDBDs that employ seamless branching.

Prepare eac3to:

1.  Eac3to from StaxRip is recommended as it includes the latest codecs.
2.  Add the directory of eac3to to the system path (Search online: `how to add directory to system path`).

### 3.1 Demux BDs (1080p)

BDs consist of playlists (.MPLS files) which consist of media (.M2TS files). Scanning the BD with BDInfo shows the available playlists.

To demux a BD, specify the playlist you wish to demux, and if applicable, the individual tracks. The `-demux` flag will extract all the tracks in the specified playlist. Extracting specific tracks from the playlist can also be done as shown below. See [here](https://en.wikibooks.org/wiki/Eac3to/How_to_Use#Command_Line_Syntax) for more commands.

##### To demux a BD:

Method 1 (using eac3to):

1.  Open Windows Command Prompt and change the current directory to your project folder:
    *   `cd /d <projectFolderPath>`
    *   E.g. `cd /d "D:\workshop\"`
2.  Use eac3to summary to find the correct playlist:
    *   `eac3to <BDMVFolderPath>`
    *   E.g. `eac3to "D:\discs\Tenet 2020 1080p Blu-ray AVC DTS-HD MA 5.1-ESiR"`
3.  Demux all media in the playlist to your project folder:
    *   `eac3to <BDMVFolderPath> <playlistNumber>) -demux -log="eac3to.txt"`
    *   E.g. `eac3to "D:\discs\Tenet 2020 1080p Blu-ray AVC DTS-HD MA 5.1-ESiR" 1) -demux -log=eac3to.txt`
4.  To demux specific playlists and tracks, specify via the command line:
    *   `eac3to <BDMVFolderPath> <playlistNumber>) <trackNumber>:outputFilename.* -log="eac3to.txt"`
    *   E.g. `eac3to "D:\discs\Tenet 2020 1080p Blu-ray AVC DTS-HD MA 5.1-ESiR" 1) 1:chapters.txt 2:video.* 3:audio.* 4:subtitles.* -log="eac3to.txt"`

Method 2 (using DGDemux):

1.  Open Windows Command Prompt and change the current directory to your project folder:
    *   `cd /d <projectFolderPath>`
    *   E.g. `cd /d "D:\workshop\"`
2.  Use DGDemux to find the correct playlist:
    *   `dgdemux -d <BDMVFolderPath>`
    *   E.g. `dgdemux -d "D:\discs\Tenet 2020 1080p Blu-ray AVC DTS-HD MA 5.1-ESiR"`
3.  Demux all media in the playlist to your project folder:
    *   `dgdemux -i <MPLSFilePath> -o <OutputFilePath>`
    *   E.g. `dgdemux -i "D:\discs\Tenet 2020 1080p Blu-ray AVC DTS-HD MA 5.1-ESiR\BDMV\PLAYLIST\00001.mpls" -o "00001"`
    *   Exclude the file extension in the `-o` flag.
4.  To demux specific tracks, specify via the command line:
    *   `dgdemux -i <MPLSFilePath> -o <OutputFilePath> -demux <PID>,<PID>,<PID>,...`
    *   E.g. `dgdemux -i "D:\discs\Tenet 2020 1080p Blu-ray AVC DTS-HD MA 5.1-ESiR\BDMV\PLAYLIST\00001.mpls" -o "tenet" -demux 1011,1100,Chapters`
    *   `PID` aka playlist ID is the hex value of the playlist shown using `dgdemux -i <MPLSFilePath>`.
    *   `Chapters` is a valid PID.

Method 3 (useful when eac3to/DGDemux does not find all the playlists):

1.  Use BDInfo to generate a BDInfo log of all playlists:
    *   CLI
        *   `bdinfo <BDMVFolderPath> -i`
        *   E.g. `bdinfo "D:\discs\Tenet 2020 1080p Blu-ray AVC DTS-HD MA 5.1-ESiR" -i`
    *   GUI
        *   Open the BDMV folder inside the program.
2.  Open Windows Command Prompt and change the current directory to your project folder:
    *   `cd /d <projectFolderPath>`
    *   E.g. `cd /d "D:\workshop\"`
3.  Demux the correct playlist based on the information given in the BDInfo log:
    *   eac3to
        *   `eac3to <MPLSFilePath> 1) -demux -log="eac3to.txt"`
        *   E.g. `eac3to "D:\discs\Tenet 2020 1080p Blu-ray AVC DTS-HD MA 5.1-ESiR\BDMV\PLAYLIST\00001.mpls" 1) -demux -log="eac3to.txt"`
    *   DGDemux
        *   `dgdemux -i <MPLSFilePath> -o <OutputFilePath>`
        *   E.g. `dgdemux -i "D:\discs\Tenet 2020 1080p Blu-ray AVC DTS-HD MA 5.1-ESiR\BDMV\PLAYLIST\00001.mpls" -o "00001"`
        *   Exclude the file extension in the `-o` flag.

#### If there are hundreds of playlists

1.  Open Process Monitor.
2.  Filter by _including_ `Process Name is vlc.exe` and _including_ `Path contains mpls`.
3.  Press the capture icon to start capturing.
4.  Open and play the disc in VLC.
5.  When you click `play` for example, vlc reads the playlist .MPLS file, which Process Manager filters.
6.  `eac3to <playlistPath> -demux -log="eac3to.txt"`

#### Log warnings

*   Before you proceed, check the log carefully as it may include important information or significant warnings (audio delayed by a few milliseconds is insignificant).

#### TrueHD

*   If demuxing the TrueHD track separately rather than with the `-demux` flag, use either `.thd+ac3` or `.*` to ensure BD-compliance.

#### Lossy audio tracks

*   Include `-keepDialnorm` in the eac3to command line when demuxing lossy tracks (excluding DTS-HD HRA).
    *   The dialog normalization value is calculated based on the dynamic statistics of the track and is used for improved lossy surround playback on modest systems, helping with dialog intelligibility.

#### Embedded forced subtitles

*   If the eac3to log mentions that the English subtitle track contains forced portions, these must be extracted with BDSup2Sub and provided as a separate track.
*   E.g. `Subtitle track 7 contains 959 normal and 170 forced captions.`

#### Playlist properties

*   Different playlists may have preferable properties to their counterparts, such as soft-coded as opposed to hard-coded subs.
*   E.g. Disney's Rogue One default English playlist had hard-coded forced subs but the French one did not. To correct this, PmP used the French playlist and made custom .PGS forced subtitles to replicate the font/size/colour/position of the original.
*   Additional subtitles can sometimes be found in other playlists.

#### Distributor logos

*   If a .MPLS playlist contains distributor credits (commonly found on Kino Lorber discs) before or after the main feature, demux the main .M2TS file separately to remove the logos:
    *   `eac3to <M2TSFilePath> -demux -log="eac3to.txt"`
    *   E.g. `eac3to "D:\discs\Tenet 2020 1080p Blu-ray AVC DTS-HD MA 5.1-ESiR\BDMV\STREAM\00001.m2ts" -demux -log="eac3to.txt"`

### 3.2 Demux DVDs

MakeMKV should be used to demux DVDs, and it will often reveal hidden text-based subtitles.

Audio and subtitles can be extracted from DVD remuxes using MKVExtract:

1.  Open Windows Command Prompt and change the current directory to your project folder:
    *   `cd /d <projectFolderPath>`
    *   E.g. `cd /d "D:\workshop\"`
2.  Find subtitle track ID:
    *   `mkvmerge <MKVFilePath> --identify`
    *   E.g. `mkvmerge "D:\title_01.mkv" --identify`
3.  Extract subtitles:
    *   `mkvextract <MKVFilePath> tracks <TrackID>:<OutputFileName>`
    *   E.g. `mkvextract "D:\title_01.mkv" tracks 2:subs`
        *   This will create files `subs.idx` and `subs.sub`.

### 3.3 Demux UHDBDs

*   Eac3to does not support UHDBDs with seamless branching (See: [http://bugs.madshi.net/view.php?id=542](http://bugs.madshi.net/view.php?id=542)).
*   In most cases, MakeMKV can be used instead if eac3to does not work.
*   In some cases, DGDemux must be used for the most accurate demux.
*   MakeMKV is currently the only program that supports Dolby Vision (as of April 2021).

### 3.4 See also

**WARNING**: the eac3to log will include your Windows username depending on the directory in which it is located.

*   Please refrain from doxing yourself when sharing this log (e.g. rename your username in the log to `me`).
*   If you are forgetful, consider changing your Windows username, e.g. `me`.
*   Alternatively, store the eac3to folder in a folder outside of the user directory e.g. `C:\Workshop\`.

Notes regarding MakeMKV:

*   For discs with DTS-HD MA, extract only the DTS-HD MA track. Do not separate the DTS core.

## 4 BDInfo

* * *

Use BDInfo to gather detailed information of all tracks:

1.  Open the disc with BDInfo, select the playlist that was demuxed and click `Scan Bitrates`.
2.  View and copy the report quick summary for later use.

Alternatively, use the CLI:

*   `bdinfo <BDMVFolderPath> -i`
*   E.g. `bdinfo "D:\discs\Tenet 2020 1080p Blu-ray AVC DTS-HD MA 5.1-ESiR" -i`

Some discs may require DVDFab's version of BDInfo.

## 5 Compare

* * *

It is important to identify the best source when studios of different regions have released the same film, resulting in different languages, bitrates, codecs and perceptual qualities.

*   [Blu-ray.com](https://www.blu-ray.com) can be used to research sources.
    *   **Note**: the site is offline daily from 10:00-10:15 AM UTC.
*   If the bitrates in multiple sources are identical, they do not require comparison.

Repeat [step 2 (Decrypt)](#2-decrypt) through [step 5 (Compare)](#5-compare) for all sources you can obtain.

### 5.1 Find best video track

Perceptual quality is of highest importance. The codec and bitrate can influence this. To compare two sources:

*   Use AVSPmod with [5.5 AviSynth+ script 1](#55-avisynth-script-1)/[5.7 VapourSynth script 1](#57-vapoursynth-script-1).
*   Check for characteristics such as: grain, compression artifacts, shadow retention, colors, HDR, and cropping.
    *   Share comparison shots with others using [https://slow.pics](https://slow.pics) to gauge public opinion.
    *   Only B frames should be compared as they are the lowest quality.
    *   Compare frames demonstrating different scene types such as light vs dark, longshot vs close-up vs extreme close-up, and scenes with fine details (hair strands, eye lashes, grass).
*   The video structure still has importance. Check for: interlacing, framerate, framecount, and hardcoded subtitles.

Cut and combine sources (not recommended unless you know what you are doing) (click to expand)

If one video source is not consistently better throughout the film, it is possible to losslessly cut and combine the best zones of each source for an ultimate hybrid track:

1.  Use AVSPmod with [5.6 AviSynth+ script 2](#56-avisynth-script-2)/[5.8 VapourSynth script 1](#58-vapoursynth-script-2).
2.  A video stream can only be cut on an I-frame that has a P-frame directly before it.
3.  A video stream must start with an I-frame.
4.  A video stream must end with either a P-frame or B-frame.
5.  The above principles constitute a “Group Of Pictures” (GOP)).
6.  Find the timestamp / frame number of the start and end of a GOP.
7.  Split the video files using `MKVToolNix → Multiplexer → Output → Splitting`.
8.  Avidemux can also be used as a GUI to cut on black frames easily.

### 5.2 Find best audio track

Audio track quality attributes ranked from highest priority to lowest:

1.  First priority: Perceptual quality is the most important characteristic when deciding quality. For example:
    *   A lower bit depth or even a lossy track without clipping might sound better than a lossless track with noticeable clipping.
    *   A music related production originally mixed in stereo and subsequently upmixed to 5.1 might sound better in stereo.
    *   A DVD may sound better than the BD: [http://blah-ray.blogspot.com/2017/01/dekalog-1989.html](http://blah-ray.blogspot.com/2017/01/dekalog-1989.html).
    *   Share comparisons of spectrogram and ampltiude statistics with others using [https://slow.pics](https://slow.pics) to gauge public opinion.
2.  Second priority: lossless encoding (LPCM, TrueHD, DTS-HD MA, DTS:X) is better than lossy (DD, DD+, DTS, DTS-HD HRA).
3.  3rd priority: an object-based layer (DTS:X, Atmos) is better than none.

If multiple mixes with different channel counts exist:

*   Keep the mix with the channel-count it was originally released/aired in.
*   Keep upmixes.
*   Keep downmixes only if the original mix has an issue or the downmix provides something useful or unique.

Commentary tracks:

*   Include all available commentaries.
*   Commentaries must not be re-encoded to a lossy format.

If a track is available in different languages:

*   Include only the production's primary language.
*   Only include a dub if it is English and of good quality.

More audio exceptions (click to expand)

*   If a production was originally mastered in stereo, do not assume that the secondary 2.0 option on a source represents this mix, since it could just be a downmix of the remastered upmix. To verify this is not the case
    
    1.  Downmix the upmix.
    2.  Compare the audio spectrograms of the unknown downmix with both the downmixed upmix and the original mix from another source (e.g. a DVD/LD):
        *   Use sox, (as with eac3to, add its directory to your system path, and change your current directory to your project folder):
        *   E.g. `sox "inputAudio.ac3" -n remix 1 spectrogram -x 10000 -y 1025 -z 120 -o "outputSpectrogram-full.png"`
        *   E.g. `sox "inputAudio.ac3" -n remix 1 spectrogram -x 10000 -y 1025 -z 120 -S 5:00 -d 0:02 -o "outputSpectrogram-zoom.png"`
        *   The above command extracts a two second sample at the 5 minute mark. You may wish to change this.
*   Remember: first listen to the tracks, and only then attempt to back up your claim with evidence reflecting what you heard. To build a strong "case", your submission should include the following:
    
    *   Statistics on each channel:
        *   `Audition → Window Menu → Enable Amplitude Screenshots → Scan → Take Screenshot`
    *   Frequency response graph:
        *   `Audition → Window Menu → Enable Frequency Analysis → Scan → Take Screenshot`
    *   Waveforms:
        *   `Audition → View Menu → Enable Waveform Editor → Take Screenshot`
    *   Spectrogram of center channel:
        *   First extract the channels separately, e.g. `eac3to audioInput.dtsma audioOutput.wavs`
        *   `Audition → Window Menu → Enable Editor → Shift+D (To Enable Spectral Frequency Display) → Take Screenshot`

#### 5.2.1 Split or combine sources

Not recommended unless you know what you're doing (click to expand)

*   If one audio audio source is not consistently better throughout the film, it is possible to losslessly cut and combine the best zones of each source for an ultimate hybrid track:
    
    *   This section is also useful to learn how to cut out silence if your video source has less padding between scene changes than your audio source.
    *   This only works when both codecs are identical.
        *   Exception: this does not work for codecs with object-based layers.
        *   Exception: FLAC must first be converted to PCM or WAVS.
    
    1.  Use `MKVToolNix → Multiplexer → Output → Splitting` to split the file based on timestamps.
    2.  Use MKVToolNix to import the first audio track, then `right-click → Append files` to append other tracks.
    3.  PCM tracks must be converted to FLAC, DTS-HD MA or TrueHD depending on the channel count in [step 6.1 (Convert)](#61-convert-lossless-audio).

### 5.3 Collect all subtitles

Subtitles must be collected as follows:

*   Collect all unique subtitles from as many Blu-ray, DVD and streaming sources as you can find.
*   English subtitles are required for a production where English is not the primary language.
*   Exclude non-English forced subtitles unless they are in the production's primary language.
*   Exclude DVD and streaming sourced subtitles if they do not offer any benefits over the Blu-ray subtitles. Text-based English subtitles from verified retail sources are encouraged, however.

To determine the language of unfamiliar subtitles:

*   Check the disc cover either physically or on [Blu-ray.com](https://www.blu-ray.com) for the list of subtitle languages included.
*   Screenshot the disc menu and OCR it on a translation tool e.g. [Yandex](https://translate.yandex.com/ocr).
*   The menu itself will often specify e.g. Espanol (Latin American), Castellano (Castilian), or Catalan.
*   The last subtitle in the stream will often specify the language.
*   Common assumptions:
    *   Spanish on North American disc is Latin American.
    *   Spanish on a ESP disc is Castilian.
    *   French on a North American disc is Canadian French.
    *   English on a GBR disc would have proper English spelling (colour vs color).

### 5.4 See also

Using the sites below is encouraged in order to gain general, historical, and technical insight into the title your are preparing:

*   [Wikipedia](https://en.wikipedia.org/wiki/Main_Page)
*   [IMDB](https://www.imdb.com/search/)
*   [Shot On What](https://shotonwhat.com/)
*   [Blu-ray Forum](https://forum.blu-ray.com/)
*   [DVDBeaver](http://www.dvdbeaver.com/)

### 5.5 AviSynth+ script 1

    # These 2 lines aren't required if you copy the plugins to your plugins folder (C:\Program Files (x86)\AviSynth+\plugins+\)
    import("C:/PATH/TO/ffms2-2.23.1-msvc/FFMS2.avsi")
    LoadPlugin("C:/PATH/TO/ffms2-2.23.1-msvc/x64/ffms2.dll")
    
    a=ffvideosource("C:/PATH/TO/sourceA.mkv")
    a=a.Subtitle("A", y=54)
    a=a.FFInfo(framenum=true,frametype=true,cfrtime=true,vfrtime=false,version=false,cropping=false,colorrange=false,colorspace=false,sar=false)
    
    b=ffvideosource("C:/PATH/TO/sourceB.mkv")
    b=b.Subtitle("B", y=54)
    b=b.FFInfo(framenum=true,frametype=true,cfrtime=true,vfrtime=false,version=false,cropping=false,colorrange=false,colorspace=false,sar=false)
    
    interleave(a, b)

### 5.6 AviSynth+ script 2

    # These 2 lines aren't required if you copy the plugins to your plugins folder (C:\Program Files (x86)\AviSynth+\plugins+)
    import("C:/PATH/TO/ffms2-2.23.1-msvc/FFMS2.avsi")
    LoadPlugin("C:/PATH/TO/ffms2-2.23.1-msvc/x64/ffms2.dll")
    
    FFVideoSource("C:/PATH/TO/source.mkv")
    FFInfo(framenum=true,frametype=true,cfrtime=true,vfrtime=false,version=false,cropping=false,colorrange=false,colorspace=false,sar=false)

### 5.7 VapourSynth script 1

    # This following line isn't required if you copy btpfunc.py to your plugins folder:
    # - `C:\Program Files\Python39\Lib\site-packages` (Windows),
    # - `/usr/local/lib/python3.9/dist-packages` (Ubuntu),
    # - `/usr/lib/python3.9/site-packages` (Fedora & Arch)
    # Note: the Python folder is different depending on the version you have installed
    
    LoadPlugin(path='C:/PATH/TO/btpfunc.py')
    
    import vapoursynth as vs
    import btpfunc as btp
    core = vs.get_core()
    path1=r'C:/PATH/TO/sourceA.mkv'
    clip1=core.ffms2.Source(path1) # You can also use src=core.lsmas.LWLibavSource(path1)
    clip1=btp.FFInfo(clip1, text='A', frame_num=True, frame_type=True, frame_time=True,color='0000FFFF') # Prints frame type (I/P/B) and absolute time.
    path2=r'C:/PATH/TO/sourceB.mkv'
    clip2=core.ffms2.Source(path2) # You can also use src=core.lsmas.LWLibavSource(path2)
    clip2=btp.FFInfo(clip2, text='B', frame_num=True, frame_type=True, frame_time=True,color='0000FFFF') # Prints frame type (I/P/B) and absolute time.
    comp=core.std.Interleave([clip1,clip2])
    comp.set_output()

### 5.8 VapourSynth script 2

    # This following line isn't required if you copy btpfunc.py to your plugins folder:
    # - `C:\Program Files\Python39\Lib\site-packages` (Windows),
    # - `/usr/local/lib/python3.9/dist-packages` (Ubuntu),
    # - `/usr/lib/python3.9/site-packages` (Fedora & Arch)
    # Note: the Python folder is different depending on the version you have installed
    
    LoadPlugin(path='C:/PATH/TO/btpfunc.py')
    
    import vapoursynth as vs
    import btpfunc as btp
    core = vs.get_core()
    path=r'C:/PATH/TO/source.mkv'
    clip=core.ffms2.Source(path) # You can also use src=core.lsmas.LWLibavSource(path)
    clip=btp.FFInfo(clip, text='source', frame_num=True, frame_type=True, frame_time=True,color='0000FFFF') # Prints frame type (I/P/B) and absolute time.
    clip.set_output()

## 6 Conversion

* * *

Certain formats require lossless encoding for better compatibility and compression.

### 6.1 Convert lossless audio

All 24-bit audio (regardless of channels) must be demuxed as .PCM/.WAVS/.FLAC using eac3to to check if it is padded with zeroes or not.

*   E.g. `eac3to 1) 3:audio.wavs`
    
*   If it is padded, eac3to will say so and do a 2nd pass to remove it.
    
*   Example eac3to log with zero padding (click to expand)
    
        eac3to v3.34
        command line: eac3to.exe padded/BDMV/ 1) 3:eng.flac
        ------------------------------------------------------------------------------
        M2TS, 1 video track, 2 audio tracks, 2 subtitle tracks, 1:41:06, 24p /1.001
        1: Chapters, 12 chapters
        2: h264/AVC, 1080p24 /1.001 (16:9)
        3: DTS Master Audio, English, 5.1 channels, 24 bits, 48kHz
           (core: DTS, 5.1 channels, 1509kbps, 48kHz)
        4: DTS Master Audio, English, 2.0 channels, 24 bits, 48kHz
           (core: DTS, 2.0 channels, 1509kbps, 48kHz)
        5: Subtitle (PGS), English
        6: Subtitle (PGS), Spanish
        [a03] Extracting audio track number 3...
        [a03] Decoding with libDcaDec DTS Decoder...
        [a03] Encoding FLAC with libFlac...
        [a03] Creating file "eng.flac"...
        [a03] The original audio track has a constant bit depth of 16 bits.
        [a03] Superfluous zero bytes detected, will be stripped in 2nd pass.
        [a03] Starting 2nd pass...
        [a03] Decoding FLAC...
        [a03] Reducing depth from 24 to 16 bits...
        [a03] Encoding FLAC with libFlac...
        [a03] Creating file "eng.flac"...
        [a03] The processed audio track has a constant bit depth of 16 bits.
        Video track 2 contains 145439 frames.
        eac3to processing took 5 minutes, 51 seconds.
        Done.
    
*   Example eac3to log without zero padding (click to expand)
    
        eac3to v3.34
        command line: eac3to.exe Not/padded/BDMV 1) 4:eng.flac
        ------------------------------------------------------------------------------
        M2TS, 1 video track, 2 audio tracks, 1 subtitle track, 1:41:23, 24p
        1: Chapters, 12 chapters
        2: h264/AVC, 1080p24 (16:9)
        3: DTS Master Audio, Italian, 5.1 channels, 24 bits, 48kHz
           (core: DTS, 5.1 channels, 1509kbps, 48kHz)
        4: DTS Master Audio, English, 5.1 channels, 24 bits, 48kHz
           (core: DTS, 5.1 channels, 1509kbps, 48kHz)
        5: Subtitle (PGS), Italian
        [v02] The video framerate is correct, but rather unusual.  <warning>
        [a04] Extracting audio track number 4...
        [a04] Decoding with libDcaDec DTS Decoder...
        [a04] Encoding FLAC with libFlac...
        [a04] Creating file "eng.flac"...
        [a04] The original audio track has a constant bit depth of 24 bits.
        Video track 2 contains 145991 frames.
        eac3to processing took 4 minutes, 40 seconds.
        Done.
    
*   Example eac3to log with partial zero padding (click to expand)
    
        eac3to v3.34
        command line: eac3to.exe partially/padded/BDMV 2) 4:eng.wavs
        ------------------------------------------------------------------------------
        M2TS, 1 video track, 2 audio tracks, 1 subtitle track, 1:24:33, 50i
        1: Chapters, 8 chapters
        2: h264/AVC, 1080i50 (16:9)
        3: RAW/PCM, English, 2.0 channels, 24 bits, 48kHz
        4: DTS Master Audio, English, 5.1 channels, 24 bits, 48kHz
           (core: DTS, 5.1 channels, 768kbps, 48kHz)
        5: Subtitle (PGS), English
        [a04] Extracting audio track number 4...
        [a04] Decoding with libDcaDec DTS Decoder...
        [a04] Writing WAVs...
        [a04] Creating file "eng.L.wav"...
        [a04] Creating file "eng.R.wav"...
        [a04] Creating file "eng.C.wav"...
        [a04] Creating file "eng.SL.wav"...
        [a04] Creating file "eng.SR.wav"...
        [a04] Creating file "eng.LFE.wav"...
        [a04] Original audio track: max 24 bits, average 16 bits, most common 16 bits.
        Video track 2 contains 126824 frames.
        eac3to processing took 3 minutes, 10 seconds.
        Done.
    

If eac3to does not know the correct endianness, you can specify the format with the `-little`/`-big` flag.

If the best audio track has 2 channels or less and is encoded with a lossless codec (e.g. DTS-HD MA 2.0 or LPCM):

*   It must be converted to FLAC using eac3to and updated FLAC set-up specified in [step 3 (Demux)](#3-demux).
*   E.g. `eac3to audio.wavs audio.flac`

If the best audio track has more than 2 channels and is encoded with a lossless uncompressed codec (e.g. LPCM):

*   It must be converted to either DTS-HD MA or TrueHD using DTS Master Audio Suite or Dolby Media Producer Suite.
    *   TrueHD is the preferred multi-channel codec since it has the best compression ratio and compatibility compared to DTS-HD MA and FLAC.
    *   The pirated version (as of April 2021) of the Dolby Media Producer Suite should not be used since, amongst other things, it does not appear to be able to encode a compatibility track according to industry standards. Only an up-to-date (and preferably licensed) version should be used.
    *   The pirated version (as of April 2021) of DTS Master Audio Suite has a 10 year killswitch that ended in 2021. You must set your system clock to 2020 before opening the program.

**Note**: do not convert lossless commentaries to lossy.

**Note**: do not transcode lossy audio tracks.

### 6.2 Convert dual mono

If a 2.0 track is dual mono (i.e. both channels are identical), do the following:

1.  Check the disc cover for e.g. `DTS 2.0 Mono`.
    
2.  Generate a spectrogram mixing channel 1 and 2 with channel 2 inverted:
    
    *   E.g. `sox dualmono.flac -n remix 1,2v-1 spectrogram -x 10000 -y 1025 -z 120 -o mono.png -c "Dual.Mono"`
    *   It will be entirely blank (black) if both channels are identical.
    *   If only short distributor sequences are coloured, it is still dual mono.
    *   Very dark blue spread throughout signifies "stereoized mono" and should be left untouched.
3.  If it is 2.0 mono, then only one channel should be included in the remux:
    
    *   E.g. `C:\eac3to.exe "F:\Das.fliegende.Klassenzimmer.1954.GERMAN.COMPLETE.BLURAY-iFPD" 1) 3:audio_mono.flac -mono -log=eac3to.txt`
    
    Sometimes, a dual mono track will include short stereo sequences mixed by the distributor: In such cases, your new track should be based on the average of both channels:
    
    *   E.g. `sox dual.mono.flac mono.flac remix 1v0.5,2v0.5`
4.  Include the spectrogram and command in your description.
    

### 6.3 Convert text-based subtitles

If the format is .VTT or another simple text-based format:

*   Convert it to .SRT using SubtitleEdit.
*   Common when sourcing subtitles from streaming services.
*   Do not convert .ASS to .SRT if it contains features incompatible with .SRT.

### 6.4 Convert image-based subtitles (aka OCR)

Use SubtitleEdit to convert low resolution VobSub image subtitles to text (only do this with languages in which you are literate). If the best available English subtitles/translation is from a DVD (VOBSub), you should OCR them to provide a more attractive option.

1.  Importing
    *   Method 1 (for subtitles previously extracted with MakeMKV)
        1.  Select `File → Import → Import Vobsub subtitle for OCR...`
    *   Method 2 (when MakeMKV has errors)
        1.  Select `File → Import → Subtitle from VOB/IFO (DVD)` and select the title's main .IFO.
        2.  The dialogue box will show the title's sequence of VOB Files. Click `Start Ripping` to rip all the subtitles.
        3.  Compare the extracted subtitles with the DVD Menu to verify that the language is correct.
            *   DVDs often provide wrong info about languages.
        4.  The dialogue box will show multiple subtitles if multiple are ripped. Go through each one and click `Save As`.
        5.  Click `OK` to proceed to OCR.
2.  Initialization
    1.  Set the OCR Method as `Tesseract 3.02` on Windows, or `Tesseract 4` on Linux.
        *   `Tesseract 5.0` is newer and may produce more OCR errors. The best engine will depend on subtitle type and font.
    2.  Click on `...` next to `Language` to download the language pack.
    3.  Click on `...` next to `Dictionary` to download the spell-checking dictionary.
    4.  Configure the `Image Palette` tab with custom colours and transparency.
        *   OCR works best with a black text against a white background, or white text with a black outline against a transparent background.
3.  OCR
    1.  Click `Start OCR`. You will be prompted to verify errors or words not recognized.
4.  Review
    1.  Perform a visual check. Go through each line at a mild place and compare the OCR'd text to the images. Common errors include:
        *   Missing `-`'s in dialogue lines,
        *   Full stops (`.`) replacing commas (`,`),
        *   Pipe (`|`) replacing letter `I`'s,
        *   Shorter words missing a few letters.
    2.  Note any recurring errors and batch fix them later with the `Replace` tool, but correct as much as possible first.
    3.  Click `OK` to complete the OCR which will return you to the main window.
    4.  Open `Tools → Fix common errors`. Select any extra issues you feel might be present beyond the defaults.
    5.  Click `Next >`, order the errors by function, and check if the errors are correctly identified.
    6.  Click `Apply selected fixes`.
    7.  Run a final spell-check.
5.  Saving
    1.  Verify that encoding `UTF-8 without BOM` is selected.
    2.  Click `Save` and save as SubRip (.SRT) format.
6.  SDH
    *   If the OCR'd subtitles are SDH (Subtitles for the Deaf or Hard of Hearing) with non-dialogue information such as `[Door creaks]`, you can remove such elements to have a set of non-SDH subtitles:
        1.  Select `Tools → Remove text for hearing-impaired...`.
        2.  Remove the extra information to create a standard full subtitle.
        3.  Do a quick visual to confirm the process was succesful.

### 6.5 Tonemap HDR subtitles

SDR Subtitles must be tonemapped for HDR video or else they will be too bright:

1.  Use subtitle\_tonemap to tonemap SDR subtitles:
    *   e.g. `subtitle_tonemap "C:\path\to\subtitles.sup" --output tonemapped`

HDR subtitles must be tonemapped for SDR video or else they will be too dark. Simply changing the brightness does not work as the blacks will no longer be black.

1.  Open the .PGS subtitle in BDSup2Sub and export .PGS to .PNG + .XML.
2.  Use the following script over the extract image folder with [imagemagick](https://imagemagick.org/index.php):
    *   Powershell:
        
            mkdir mapped
            $files = @(Get-ChildItem *.png)
            foreach ($f in $files) {
                $file=$f.name
                magick.exe $file -fuzz 15% -fill 'rgb(204,204,204)' -opaque 'rgb(152,152,152)' -fuzz 15% -fill 'rgb(195,195,195)' -opaque 'rgb(109,109,109)' mapped/$file
            }
        
    *   Bash:
        
            mkdir mapped
            for file in *.png; do
                magick $file -fuzz 15% -fill 'rgb(204,204,204)' -opaque 'rgb(152,152,152)' -fuzz 15% -fill 'rgb(195,195,195)' -opaque 'rgb(109,109,109)' mapped/$file
            done
        
    *   You might need two passes or even two different fill colours, for the fade between the black border.
    *   **Note**: The colours may be incorrect on your first try.
3.  Import the .XML and .PNG back to .PGS using BDSup2Sub.

## 7 Chapters

* * *

### 7.1 Collect

Collect chapters using the eac3to command from [step 3 (Demux)](#3-demux).

### 7.2 Check for accuracy

Use the disc menu in VLC to manually navigate to each chapter and verify that the timestamps correspond to the eac3to-extracted chapters.txt file. They are often a few frames off.

If the chapters are not from the same source as your video track, confirm that they are synced to the correct scene changes.

Add a chapter for the `End Credits`, `Mid-Credits Scene`, and/or `Post-Credits Scene` if applicable and if they do not already exist.

Chapters from web sources should be verified to have sensible names and intervals.

Amazon example of ridiculous "chapter sentences" (click to expand)

    00:00:00.000                             : en:Studio logos
    00:00:23.000                             : en:Swagger &amp; Fenn &amp; Opening Credits
    00:02:59.000                             : en:Swagger and Fenn Engage the Enemy
    00:06:01.000                             : en:Air Support Arrives
    00:08:15.000                             : en:Thirty-Six Months Later
    00:10:24.000                             : en:Swagger Gets Visitors
    00:12:37.000                             : en:Colonel Johnson Asks Swagger to Plan Assassination
    00:16:05.000                             : en:Swagger Recreates the Shot
    00:18:55.000                             : en:Swagger Scouts Possible Assassination Locations
    00:20:58.000                             : en:Swagger Reports to the Colonel
    00:23:14.000                             : en:Swagger and the Team Prepare
    00:27:21.000                             : en:The Shooter Takes the Shot
    00:31:10.000                             : en:Swagger Gives Himself First-Aid and Evades Authorities
    00:34:38.000                             : en:The FBI Searches for Swagger
    00:37:06.000                             : en:The Media Blames Nick Memphis for Swagger's Escape
    00:39:02.000                             : en:Swagger Buys Supplies
    00:41:08.000                             : en:Memphis Mans the Phones and Swagger Recovers
    00:44:25.000                             : en:Swagger Asks Donny's Wife for Help, Kentucky
    00:48:54.000                             : en:Memphis Explains the Discrepencies
    00:51:27.000                             : en:Sarah Sews Up Swagger
    00:53:43.000                             : en:Memphis Continues His Investigation
    00:55:49.000                             : en:Swagger Wakes &amp; Memphis Researches
    00:57:52.000                             : en:Sarah Checks Her Work
    00:59:39.000                             : en:Sarah Gives Swagger a Rifle
    01:02:27.000                             : en:Sarah Meets With Memphis
    01:05:09.000                             : en:Memphis Digs Deeper
    01:08:01.000                             : en:The Conspirators Interrogate Memphis
    01:11:44.000                             : en:The Conspirators Discuss Swagger
    01:13:06.000                             : en:Swagger &amp; Memphis Seek Wisdom
    01:18:00.000                             : en:Tracking the shooter
    01:20:02.000                             : en:Payne Attacks Sarah
    01:21:24.000                             : en:Swagger &amp; Memphis Prepare for the Attack
    01:23:16.000                             : en:Memphis and Swagger Infiltrate the Ranch
    01:26:38.000                             : en:Swagger Interrogates Sandor
    01:33:50.000                             : en:Swagger Has a Flashback
    01:36:00.000                             : en:The FBI Investigates the ranch
    01:37:23.000                             : en:Memphis and Swagger Make Some Calls
    01:39:56.000                             : en:Memphis and Swagger Meet With the Conspirators
    01:43:31.000                             : en:Swagger Takes the Shot
    01:44:29.000                             : en:Calling in the FBI
    01:47:26.000                             : en:Swagger Surrenders
    01:50:08.000                             : en:Swagger Makes a Point
    01:54:42.000                             : en:The Attourney General Gives Swagger a Suggestion
    01:55:31.000                             : en:Johnson and Meacham Celebrate
    01:57:27.000                             : en:Swagger Deals With the Conspirators
    02:01:04.000                             : en:End Credits

Example of user-corrected chapters (click to expand)

    00:00:00.000                             : en:Shooter (2007)
    00:02:58.637                             : en:Engaging the Enemy
    00:08:14.494                             : en:Thirty-Six Months Later
    00:12:36.756                             : en:Planning an Assassination
    00:27:20.097                             : en:Taking the Shot
    00:31:07.866                             : en:On the Run
    00:48:53.889                             : en:Discrepencies
    00:53:43.220                             : en:The Investigation Continues
    01:05:09.155                             : en:Digging Deeper
    01:13:10.678                             : en:Seeking Wisdom
    01:21:23.337                             : en:The Preparation
    01:33:49.624                             : en:Flashback
    01:39:56.116                             : en:Meeting the Conspirators
    01:47:25.022                             : en:Surrendering
    01:55:30.924                             : en:Celebration
    02:00:29.222                             : en:End Credits

### 7.3 See also

**Note**: studios have been found to store chapters with incorrect timestamps, and have the Java menu quietly correct them upon playback.

If eac3to did not find chapters or they are not named:

1.  Check the BD menu with VLC.
2.  Check all other available retail sources (including DVDs and WEB sources such as an AMZN WEB-DL).
    *   If a disc has non-English chapters, consider finding someone who can translate them for you.
    *   Named chapters are always preferred to numbered chapters.
3.  If no acceptable chapter names can be found, name them Chapter 01, Chapter 02, etc. using the source with the best scene change intervals.
4.  If no acceptable chapter timings can be found, generate some at reasonable intervals (e.g. at major scene changes).

Named chapters should be capitalized according to the APA Style Guide. Refer to [https://capitalizemytitle.com/](https://capitalizemytitle.com/) for further assistance.

For foreign chapters, use the MKVToolNix chapter editor to include both the original chapter names and the English-translated chapter names with the correct flags set for each.

If you are editing a `chapter.txt` file directly, make sure that you are using UTF-8. If you use ANSI, your chapters might break after international characters such as `é`.

## 8 Syncing

* * *

Different sources will often need to be timed so that they are in sync. Chapters often need to be re-synced to scene change I-frames (see below) since less competent studios do not do this.

### 8.1 Sync audio to video with offset

Method 1: compare video (recommended):

1.  Open both video tracks in AviSynth+/VapourSynth.
    
2.  Find the difference in frame count between the same frame on both tracks.
    
3.  Convert the offset to seconds by dividing the frame difference (i.e. the number of frames by which the two sources are misaligned), and the frame rate of the video source you will use.
    
    *   **Note**: 23.976 fps is actually 24000/1001.
        
    *   E.g. Divide an offset of 120 frames by (24000 frames / 1001 seconds) to get 5.005 seconds.
        
        > 120 / (24000/1001) = 5.005
        
4.  Convert the offset to seconds using the rational framerate.
    
    *   **Note**: 23.976 fps is actually 24000/1001 so divide the offset by the fraction to convert the framecount to seconds.
5.  Apply delay to audio in MKVToolNix.
    

Method 2: compare audio

1.  Open both audio tracks in Audacity.
2.  Find the time offset between peaks/crests in waveform.
3.  Apply delay to audio in MKVToolNix.

On negative delays, MKVToolNix cuts out the unnecessary audio which maintains compatibility. However, on positive delays, MKVToolNix applies the delay in a flag which some devices are incompatible with. For positive delays:

*   If the codec is DTS-HD MA/DTS/DD/FLAC/LPCM:
    *   Use eac3to to add the delay (adding silence to the beginning of the track).
    *   E.g. `eac3to input.eac3 output.eac3 +178ms`
*   If the codec is TrueHD:
    *   If there is no atmos, consider converting to DTS-HD MA and following above.
    *   Trim video instead.

If the negative delay cuts off non-silent audio, you would need to prepend black video to the video track:

*   This black video can be a 1-second cut of the beginning of the opening sequence or end of credits.
*   See [step 5.1 (Compare: find best video track → Highly Advanced)](#51-find-best-video-track)

### 8.2 Sync chapters to scene-change frames

Do the following:

1.  Use [5.6 AviSynth+ script 2](#56-avisynth-script-2) or [5.8 VapourSynth script 2](#58-vapoursynth-script-2) with AVSPMod and open the video.
2.  Go to `Macros → Import Bookmarks From File` (AVSPMod) or `Script → Preview → Load Chapters` (VSEdit), and import the corrected eac3to-extracted chapters.txt or the corrected MKVExtract-extracted chapter XML as done in [step 7.2 (Chapters: check for accuracy)](#72-check-for-accuracy).
3.  Use `F2` and `shift+F2` (AVSPMod) or `Ctrl+left` and `Ctrl+right` (VSEdit) to jump to the next/previous chapter and verify it is on the correct scene and on the scene-change frame.
4.  If the chapter on the scene-change frame is not an I-frame.
    
    1.  Find the closest I-frame through the `next`/`previous` frame buttons.
    2.  Remove the old bookmark and add the new one by pressing `Ctrl+B` on the selected frame (AVSPMod) or by pressing `[Un]bookmark current frame` (VSEdit).
    
    *   Exception: verify that the chosen I-frame does not have dialogue or obvious scene noises that start or finish before the video change.
        *   If it does, find the nearest I-frame that doesn't cut off that dialogue.
    *   Exception: very rarely, the original intent may have been to place a named chapter change at a point that maintains a thematic beat rather than to cut a scene.
        *   If it's evident that the named chapter corresponds with a thematic beat, choose the best available I-frame that maintains that beat.
    *   Another way is using Avidemux which is a GUI with buttons that "skip to the next keyframe".

### 8.3 Sync subtitles

Sync retail subtitles (.PGS, VobSub):

*   Method 1:
    1.  Import the subtitles into BDSup2Sub.
    2.  If necessary, convert the framerate (e.g. PAL to NTSC) or add an offset.
    3.  Or, export .PGS to .PNG + .XML, then edit the .XML and finally import back to PGS.
        *   This method can be used to extract embedded forced portions from the main subtitle track.
*   Method 2:
    1.  Import the VobSub into Subtitle Edit.
    2.  Click `OK` to bypass the OCR.
    3.  Sync the timestamps of individual lines or use the `Synchronization` tab.
    4.  Install the plugin (`File → Plugins`) `Replace VobSub IDX timestamps`.
    5.  Activate the plugin (`Synchronization → Replace IDX timestamps`).
    6.  The .IDX file will be duplicated and overwritten with the new timings.

Sync retail subtitles (.SRT):

1.  Import the .SRT file into Subtitle Edit.
2.  Import the video file you are syncing to into Subtitle Edit.
3.  Use the `Synchronization` tab.
4.  Adjust the frame rate if necessary.
5.  Select `Adjust all times` and enter the delay if necessary.
6.  Check that the sync is fitting by watching a couple of minutes at 10 minute intervals.
    *   If they go out of sync at any point due to a different cut or scene change padding, find that exact point and adjust the delay accordingly.
7.  In rare cases, you might need to adjust the speed by a small margin.
    *   This happens mostly with PAL DVD subtitles, usually only by less than 1% (test with 0.1% increments).
8.  Manual syncing might be required for older movies. For advanced cases or users **ONLY**:
    1.  Select points at 5 to 10 minute intervals.
    2.  Add the waveform.
    3.  Sync each line that differs too much from the correct timing.

Create/edit custom subtitles (.SRT):

*   Create custom subtitles if and only if no source contains English subtitles.
*   If custom subtitles already exist elsewhere, you must check them line by line for accuracy and correct them if necessary.
*   Use Subtitle Edit.
*   Keep retail .SRT subtitles in their original retail format; do not convert them to .PGS.

### 8.4 Sync Kino Lorber BDs

BDs distributed by Kino Lorber are known for a silent intro of their logo that is exactly 11011 milliseconds long but in which time no empty audio or subtitle track is played. This means that the audio and subtitle tracks will be out-of-sync by 11011 milliseconds with the video and chapters.

*   99.9% of Kino-distributed BDs need to have their chapters retimed after following the guidelines below to correct the above issue.
*   Demux the .M2TS file in the BDMV folder directly to avoid the introduction logo.
    *   Play each .m2ts file manually to find the correct file.
*   Add the delay to the chapters using the `MKVToolNix Chapter Editor → Right-Click → Additional Modifications → Shift`.

## 9 Tag

* * *

MKV Tags allow for useful metadata to be specified.

Create an .XML file with UTF-8 text encoding for the mkv tags for later. Note the comments inside `<!-- -->`.

Click each of the following to expand:

For a Movie:

    <?xml version="1.0" encoding="UTF-8"?>
    
    <tags>
        <tag>                                         <!-- Movie Template -->
            <targets>
                <targettypevalue>50</targettypevalue> <!-- 50 is used for MOVIE/EPISODE/CONCERT -->
            </targets>
            <simple>
                <name>IMDB</name>
                <string>tt#####</string>              <!-- Replace # with imdb id for that movie e.g. tt4154756 -->
            </simple>
            <simple>
                <name>TMDB</name>
                <string>movie/#####</string>          <!-- Replace # with tmdb id for that movie e.g. movie/299536 -->
            </simple>
        </tag>
    </tags>

For a TV Show (simple version):

    <?xml version="1.0" encoding="UTF-8"?>
    
    <tags>
        <tag>                                         <!-- TV Show Template (simple) -->
            <targets>
                <targettypevalue>70</targettypevalue> <!-- 70 is used for COLLECTION -->
            </targets>
            <simple>
                <name>IMDB</name>
                <string>tt####</string>               <!-- Replace # with IMDB id for that tv series e.g. tt0944947 -->
            </simple>
            <simple>
                <name>TMDB</name>
                <string>tv/####</string>              <!-- Replace # with TMDB id for that tv series e.g. tv/1399 -->
            </simple>
            <simple>
                <name>TVDB</name>
                <string>####</string>                 <!-- Replace # with TVDB id for that tv series e.g. 121361 -->
            </simple>
        </tag>
    </tags>

For a TV Show (advanced version - which should be used when possible):

    <?xml version="1.0" encoding="UTF-8"?>
    
    <tags>
        <tag>                                         <!-- TV Show Template (Advanced) -->
            <targets>
                <targettypevalue>70</targettypevalue> <!-- 70 is used for COLLECTION -->
            </targets>
            <simple>
                <name>IMDB</name>
                <string>tt####</string>               <!-- Replace # with IMDB id for that tv series e.g. tt0944947 -->
            </simple>
            <simple>
                <name>TMDB</name>
                <string>tv/####</string>              <!-- Replace # with TMDB id for that tv series e.g. tv/1399 -->
            </simple>
            <simple>
                <name>TVDB</name>
                <string>####</string>                 <!-- Replace # with TVDB id for that tv series e.g. 121361 -->
            </simple>
        </tag>
        <tag>                                         <!-- Season -->
            <targets>
                <targettypevalue>60</targettypevalue> <!-- 60 is used for SEASON/SEQUEL/VOLUME -->
            </targets>
            <simple>
                <name>PART_NUMBER</name>
                <string>#</string>                    <!-- Replace # with season number e.g. 1 -->
            </simple>
            <simple>
                <name>TOTAL_PARTS</name>
                <string>#</string>                    <!-- Replace # with number of episodes in that season e.g. 10 -->
            </simple>
        </tag>
        <tag>                                         <!-- Episode -->
            <targets>
                <targettypevalue>50</targettypevalue> <!-- 50 is used for MOVIE/EPISODE/CONCERT -->
            </targets>
            <simple>
                <name>PART_NUMBER</name>
                <string>#</string>                    <!-- Replace # with episode number of that season e.g. 4 -->
            </simple>
            <simple>
                <name>IMDB</name>
                <string>tt####</string>               <!-- Replace # with IMDB id for that episode e.g. tt1829963 -->
            </simple>
        </tag>
    </tags>

**Note**: when using TMDB IDs, verify that it is correctly identified by TMDB as a movie or TV show. The metadata system breaks if, for example, TMDB identifies a movie as a TV show but is tagged the `50` TargetTypeValue. You should create a TMDB account to edit or create a new entry.

## 10 Mux

* * *

Use MKVToolNix to remux the assets you've prepared into an MKV container.

### 10.1 Import all the tracks

Import the following:

1.  Best video track.
2.  Best audio track, and if relevant: original mixes, commentaries, isolated score.
3.  Best subtitles from all possible languages.
    *   Important: exclude all forced foreign subtitles designed for their dubbed counterparts.

If a movie is divided between more than one disc:

1.  Import the first section of the movie
2.  Right-click the first section and select `Append files`.
3.  Select to append the second section of the movie.

### 10.2 Order the tracks

The tracks must be sorted in the following order.

#### 10.2.1 Order the video

The main video track should be placed first.

#### 10.2.2 Order the audio

Audio should be placed second and in the following sequence:

1.  Main audio with the highest perceptual quality.
2.  Compatibility track
    *   Placed immediately after the track it provides compatibility for.
    *   When you demux a TrueHD track correctly (see [step 3 (Demux)](#3-demux)), the compatibility track will be exported as a separate track. Make sure to include this second compatibility track in addition to the main track.
3.  Alternative/unique audio mixes
    *   If there are multiple audio mixes, order them according to quality, starting with what is objectively the best option. This will usually, but not always, be the one with the highest channel count and/or bitrate.
4.  Commentaries
    *   Order of importance. Generally:
        1.  Director
        2.  DP/cinematographer
        3.  Actors
        4.  Film critics / Others
    *   However, for example, if an actor is more notable than the director (e.g. a James Bond movie), the actor's commentary should be first.

#### 10.2.3 Order the subtitles

Subtitles should be placed next in the following order:

1.  First: `Forced for non-English/foreign dialogue/titles` for the production's primary spoken language if applicable.
2.  Next: `Intertitles` for the production's primary language if applicable.
3.  Next: subtitles are ordered alphabetically by their English name (except English language itself, which is always first).
    *   Within each language, dialects are ordered alphabetically by their English name (except the base dialect, which is always first).
        *   Within each dialect, group individual retail sources in order of quality (e.g. if a Criterion DVD source has better quality English translation than that of the Blu-ray).
            *   Within each specific source, the regular subtitle variant comes first, followed by the SDH variant.
        *   Do not include forced foreign subtitles designed for their dubbed counterparts.
        *   Base dialects include: French (Parisian), Spanish (Castilian) and Portuguese (Iberian).
            *   If the dialect is associated with the language's country of origin, then it is usually the base dialect.
            *   Chinese does not have a base dialect. Simplified, Traditional or Cantonese should be specified for the written script type.
4.  Next: `For non-English parts on English dub` if applicable.
5.  Next: `Intertitles` for the English dub if applicable.
6.  Next: subtitles for English dub if applicable.
7.  Next: subtitles for commentaries in the same order of the audio track(s).

Subtitle ordering example:

1.  English - `for foreign dialogue`
2.  English
3.  English - `SDH`
4.  Chinese - `Traditional`
5.  French
6.  French - `SDH`
7.  French - `Canadian`
8.  French - `SDH / Canadian`
9.  English - `For non-English parts on English dub` (only if production's primary language was not English)
10.  English - `Dub` (only if production's primary language was not English)
11.  English - `Commentary by ...`
12.  Chinese - `Traditional / Commentary by ...`
13.  French - `Commentary by ...`
14.  French - `Canadian / Commentary by ...`

### 10.3 Rename all the tracks

#### 10.3.1 Name the video

The video track title should reflect the BDInfo Quick Summary

*   E.g. `MPEG-4 AVC Video / 31990 kbps / 1080p / 23.976 fps / 16:9 / High Profile 4.1`
*   E.g. `MPEG-H HEVC Video / 50156 kbps / 2160p / 23.976 fps / 16:9 / Main 10 @ Level 5.1 @ High / 4:2:0 / 10 bits / 4000nits / HDR10+ / BT.2020`
*   E.g. `MPEG-H HEVC Video / 56339 kbps / 2160p / 23.976 fps / 16:9 / Main 10 @ Level 5.1 @ High / 4:2:0 / 10 bits / 1000nits / HDR10 / BT.2020 / Dolby Vision FEL @ 5860 kbps`
*   Verify that there are no double spaces with only a single space on each side of the `/`.
*   Only change the properties from the BDInfo if the bitrate was changed in [Step 5 (Split or combine sources)](#5-compare). Using the BitrateViewer is preferred on hybrids to gather bitrate precise to 2 decimal places.
*   For Dolby Vision, `FEL` should be specified when the layer's bitrate exceeds ~2500 kbps, otherwise, `MEL` should be specified. See [blu-ray.com](https://forum.blu-ray.com/showthread.php?p=12116287#post12116287) and the [wiki](33.md) for further guidance.

#### 10.3.2 Name the audio

The audio track title(s) should reflect the BDInfo Quick Summary.

*   E.g. `DTS:X Master Audio / 7.1 / 48 kHz / 6586 kbps / 24-bit`
*   Verify that there are no double spaces with only a single space on each side of the `/`.
*   Only change the properties from the BDInfo if the bitdepth, bitrate, or codec was changed in [Step 6 (conversion)](#6-conversion) or [Step 5 (Split or combine sources)](#5-compare).

Audio track title naming exceptions:

*   Prepend details of alternative audio mixes if applicable:
    *   E.g. `Surround Upmix / DTS-HD Master Audio / 5.1 / 48 kHz / 3611 kbps / 24-bit`
    *   E.g. `Original Mix / DTS-HD Master Audio / 4.0 / 48 kHz / 2947 kbps / 24-bit`
    *   E.g. `Stereo Mix / FLAC Audio / 2.0 / 48 kHz / 1352 kbps / 16-bit`
    *   E.g. `Stereoized Mono / FLAC Audio / 2.0 / 48 kHz / 387 kbps / 16-bit`
*   Lossless tracks converted to FLAC should be labelled as follows:
    *   E.g. `FLAC Audio / 2.0 / 48 kHz / 752 kbps / 16-bit`
*   The compatibility track embedded in TrueHD tracks should be labelled as follows:
    *   E.g. `Compatibility Track / Dolby Digital Audio / 5.1 / 48 kHz / 640 kbps`
*   English dubs should be labelled as follows:
    *   E.g. `Dub / Dolby TrueHD Audio / 5.1 / 48 kHz / 2342 kbps / 24-bit`

Commentary track names should be descriptive:

*   E.g. `Commentary by director/producer Jeff Orlowski, lead James Balog, and field coordinators Adam LeWinter and Svavar Jónatansson`
*   If a person has multiple roles, separate them with a `/`.
*   Use the Oxford comma.
    *   E.g.`Actor 1, Actor 2, and Actor 3` rather than `Actor 1, Actor 2 and Actor 3`
*   Order the roles as they are listed on the Blu-ray menu/cover.
*   Role examples:
    *   E.g. `director`, `writer`, `co-writer`, `producer`, `cinematographer`, `editor`, `film historian`, `British film historian`, `filmmaker`
*   If a commentary with many contributors would result in a title that is very long, discretion should be used to shorten it, such as by only including important names, or only including the names on the Blu-ray menu/cover:
    *   E.g. `Commentary by director Guy Hamilton, accompanied by cast and crew`
    *   E.g. `Commentary by the kids from "School of Rock"`
*   If a commentator is known for other relevant pieces of production, follow the format below:
    *   E.g. `Commentary by filmmaker/historian Bret Wood, author of Orson Welles: A Bio-Bibliography`
    *   E.g. `Commentary by "Beware the Moon" filmmaker Paul Davis`
*   If the commentary is moderated by someone unrelated to the production, append them as follows and include relevant productions if applicable:
    *   E.g. `Commentary by director John Huckert moderated by Tom Fitzgerald of EXP TV`
*   If the commentary is performed by an unrelated group, follow the format below:
    *   E.g. `Commentary by The Hysteria Continues podcast`
*   If it's an isolated score, follow the format below:
    *   E.g. `Isolated score with commentary by composer Mark Isham`

##### 10.3.2.1 Name older audio formats

Notes on older audio formats that may be unfamiliar to you.

Dolby Surround: (click to expand)

*   Purpose: surround sound using 4 channels in a LCRS system (Left, Center, Right, mono Surround) as opposed to the standard DD 4.0 quadraphonic system.
*   Used in:
    *   DVD: DD 2.0/4.0
    *   LD: PCM 2.0
    *   BD/UHDBD: DD/LPCM/DTS-HD MA 2.0/4.0/4.1
*   Denoted on the cover by:
    *   `Dolby Surround`.
    *   `DTS 2.0 surround` (usually when DTS-HD MA is used) as opposed to `DTS 2.0`.
    *   `Dolby Surround 4.0` instead of `Dolby Digital 4.0`.
    *   Logo will also often be found in the movie credits.
*   Denoted by:
    *   `Channel layout: Lt/Rt` in MediaInfo (DTS codecs only).
    *   E.g. `Audio: English / Dolby Digital Audio / 2.0 / 48 kHz / 192 kbps / DN -4dB / Dolby Surround` in BDInfo.
    *   E.g. `AC3 Surround, 2.0 channels, 192kbps, 48kHz, dialnorm: -27dB, 3ms` in eac3to.
*   The 4 channels can be:
    *   4.0: discrete.
        *   Known as: `Dolby Surround AC-3 Digital 4.0`
        *   Audio track should be prepended by
            *   `Dolby Surround /` for DD 4.0, or
            *   E.g. `Discrete LCRS /` or `Original Surround Mix /` for 4.1 (Dolby Surround 4.0 with an enhanced LFE) and for formats other than DD.
    *   2.0: matrix-encoded into 2.0 Lt/Rt (Left Total / Right Total) and decoded as 4.0 LCRS upon playback.
        *   Known as: `Dolby Surround`.
        *   Audio track name should be prepended with `Dolby Surround /`.

#### 10.3.3 Name the subtitles

Subtitles must be set to the correct language. You may need to enable additional languages via MKVToolNix settings if some are missing. You should only give subtitles a track title in the following cases:

*   Dialects:
    *   The base dialect should not be named.
    *   Only if there are multiple dialects, the additional ones should be named based on the English translation of the dialect.
        *   E.g. `Latin American`, `Brazilian`, `Canadian`, `Traditional` to specify a dialect of Spanish, Portuguese, French or Chinese.
        *   Chinese is usually one of `Simplified`, `Traditional`, `Cantonese`, `Simplified / Singapore`, `Traditional / Hong Kong` or `Traditional / Taiwan`.
*   All SDH subtitles must be named `SDH`.
    *   `SDH` stands for "Subtitles for the Deaf or Hard of Hearing", but are also useful for anyone watching in noisy environments (e.g. commuting) or with the sound turned down (e.g. when your partner is asleep). SDH subtitles include additional information such as background noises (e.g. `[door creaks]`).
    *   For dialects, use e.g. `SDH / Latin American`.
*   Foreign (e.g. alien) dialogue:
    *   E.g. `For non-English dialogue/titles`.
    *   E.g. `For non-Korean dialogue/titles` if the production's primary language is Korean.
    *   E.g. `For non-English parts on English dub` for the English dub if the production's primary language is non-English.
*   Commentary subtitles:
    *   Should be named identical to the accompanying audio track.
    *   Should append the dialect if applicable.
        *   E.g. `Canadian / Commentary by...`
*   Multiple subtitles of the same language must be appended by the following:
    *   `/ Studio / Source`
    *   E.g. `/ Criterion / NTSC DVD` or `/ Amazon`
*   OCR'd subtitles must append the following:
    *   `/ OCR`

### 10.4 Set flags and add metadata

#### 10.4.1 Set flags

**Language flags**. The following should be set:

1.  Set video track to the same language as the main audio track.
2.  Set audio track to its respective language.
    *   If there is no dialogue, the language code is `zxx`.
3.  Set subtitle track to its respective language, including the dialect if applicable.

Set the following boolean flags to `no` if the following cases don't apply.

**Default flags**. Set the `Default track` flag to `yes` for the following:

*   Main video.
*   Main audio.
*   Regular English-translated subtitles when the official audio is not English.
*   All subtitles with the forced flag.

**Forced flags**. Set the `Forced display` flag to `yes` for the following:

*   Partial subtitles in the production's primary language for foreign parts only (e.g. alien language).
    *   In rare cases, a film equally split between two languages might have two of these tracks: one for each "foreign language" half.
*   Intertitles.

**Hearing impaired flags**. Set the `Hearing impaired` flag to `yes` for all SDH subtitles.

**Visual impaired flags**. Set the `Visual impaired` flag to `yes` for all audio tracks that include auditory descriptions for the visually impaired.

**Text descriptions flags**. Set the `Text descriptions` flag to `yes` for all subtitle tracks with text-based descriptions for the visually impaired that can be read via a screen reader or Braille device.

**Original language flags**. Set the `Original language` flag to `yes` for all audio tracks in the production's primary language.

**Commentary flags**. Set the `Commentary` flag to `yes` for all audio and subtitle tracks that are commentary.

**Dialog normalization**. Tick `Remove dialog normalization` on all lossless tracks as well as DTS-HD HRA. For all other tracks, make sure it is unticked.

#### 10.4.2 Set compression

**zlib compression**. Verify that zlib compression is disabled for all tracks.

#### 10.4.3 Add additional metadata

**Title naming**. Give a title in the form:

*   `Movie Name (Year)`
*   `TV Show Name - S##E## - Episode Name`
*   `TV Show Name - S##E##`
    *   Only if the TV show episodes were not given names.

**Chapter file**. Add the chapter file created from [step 7 (Chapters)](#7-chapters) on the Output tab.

**Tag file**. Add the tag file created from [step 9 (Tag)](#9-tag) on the Output Tab.

### 10.5 Name the file

Name the file according to site rules. Use only the following characters (no spaces):

*   `abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789.-`
*   The filename should be in the following format: `Name.Year.S##E##.Cut.Hybrid.REPACK.Resolution.Source.Type.HDR.VCodec.ACodec.Channels-Extensions.Object-Tag`
    *   **Name**. The production's internationally-recognized name (usually found on IMDB unless it's incorrect).
    *   **Year**. Release year according to IMDB.
    *   **S##E##**. Season and episode number if applicable. Show name must not be included.
    *   **Cut** (if omitted, assumed `Theatrical`, else, e.g.: `Directors.Cut`, `Extended`, `Special.Edition`, `Unrated`, `3D`, `Super.Duper.Cut`).
    *   **Hybrid**. Only included when one of the main streams is made up of two or more sources.
    *   **REPACK**. Only included when you are fixing an error or including a better source in one of your previous releases of the same production.
    *   **Resolution** (`480i`, `576i`, `720p`, `1080p`, `1080i`, `2160p`). Video resolution.
    *   **Edition** (`XXth Anniversary Edition`, `Remastered`, `4K Remaster`, `Criterion`, `Limited`). Omit from filename and put in description.
    *   **Source** (`HDDVD`, `BluRay`, `UHD.BluRay`). Video disc source.
    *   **Type**. Will always be `REMUX`.
    *   **HDR** (if omitted, assumed SDR, else, one of: `HDR` for HDR10, `HDR10Plus`, `DV`, `DV.HDR10Plus` ).
    *   **VCodec** (One of: `MPEG-2`, `VC-1`, `AVC`, `HEVC`). Video codec.
    *   **ACodec** (One of: `DD`, `DD-EX`, `DDP`, `TrueHD`, `DTS`, `DTS-ES`, `DTS-HD.MA`, `DTS-HD.HRA`, `DTS-X`, `FLAC`). Audio codec of the default audio track.
    *   **Channels** (One of: `1.0`, `2.0`, `2.1`, `3.0`, `3.1,` `4.0`, `4.1`, `5.0`, `5.1`, `6.1`, `7.1`). Audio channels of the default audio track.
    *   **Object** (if omitted, assumed none exists, else, one of: `Atmos`).
    *   **Tag**. The "brand" you want to be known by.
        *   Completely your choice (as long as it has not already been claimed).
        *   Can be your username if desired.

## 11 Request approval

* * *

Congratulations! You have now successfully completed a high-quality remux.

It is highly encouraged that you participate in Blutopia's user release program to receive feedback and approval from Blutopia internals.

Your approval request in the appropriate forum should consist of one [Pastebin](https://pastebin.com/) including the following in the same order:

*   BDInfo Quick Summary of all sources,
*   MediaInfo, and
*   eac3to log(s).

You must add a `-` before any tracks in the BDInfo that you have not remuxed and include the `QUICK SUMMARY:` label at the beginning of each Quick Summary.

Example Pastebin text for a hybrid remux (click to expand)

[https://pastebin.com/xQqpscjW](https://pastebin.com/xQqpscjW)

    QUICK SUMMARY:
    
    Disc Label: EN_MAI_FAIS_CE_QU_IL_TE_PLAIT
    Disc Size: 38,462,559,183 bytes
    Protection: AACS
    Playlist: 00001.MPLS
    Size: 28,328,773,632 bytes
    Length: 1:53:06.780
    Total Bitrate: 33.39 Mbps
    Video: MPEG-4 AVC Video / 24370 kbps / 1080p / 23.976 fps / 16:9 / Main Profile 4.1
    -Audio: French / DTS-HD Master Audio / 5.1 / 48 kHz /  3829 kbps / 24-bit (DTS Core: 5.1 / 48 kHz /  1509 kbps / 24-bit)
    -Audio: French / DTS-HD Master Audio / 2.0 / 48 kHz /  1677 kbps / 24-bit (DTS Core: 2.0 / 48 kHz /   768 kbps / 24-bit)
    -Audio: French / DTS Audio / 2.0 / 48 kHz /   768 kbps / 16-bit
    -Audio: French / DTS Audio / 2.0 / 48 kHz /   768 kbps / 16-bit
    Subtitle: French / 5.665 kbps
    Subtitle: French / 20.483 kbps
    
    QUICK SUMMARY:
    
    Disc Label: Come What May 2015 1080p USA Blu-ray AVC DTS-HD MA 5.1-CultFilms™
    Disc Size: 43,812,883,300 bytes
    Protection: AACS
    Playlist: 00005.MPLS
    Size: 27,188,355,072 bytes
    Length: 1:53:13.411
    Total Bitrate: 32.02 Mbps
    -Video: MPEG-4 AVC Video / 25488 kbps / 1080p / 23.976 fps / 16:9 / High Profile 4.1
    Audio: French / Dolby Digital Audio / 5.1 / 48 kHz / 448 kbps / DN -31dB
    -Audio: French / DTS-HD Master Audio / 5.1 / 48 kHz / 3949 kbps / 24-bit (DTS Core: 5.1 / 48 kHz / 1509 kbps / 24-bit)
    Audio: English / Dolby Digital Audio / 2.0 / 48 kHz / 448 kbps / DN -31dB
    Subtitle: English / 25.049 kbps
    
    General
    Unique ID                                : 9423834467934860155940483189717009044 (0x716F6E96CA8B179C18E5C47C15B0294)
    Complete name                            : Come.What.May.2015.Hybrid.1080p.BluRay.REMUX.AVC.DTS-HD.MA.5.1-BLURANiUM.mkv
    Format                                   : Matroska
    Format version                           : Version 4
    File size                                : 22.8 GiB
    Duration                                 : 1 h 53 min
    Overall bit rate mode                    : Variable
    Overall bit rate                         : 28.8 Mb/s
    Movie name                               : Come What May (2015)
    Encoded date                             : UTC 2020-06-14 21:28:57
    Writing application                      : mkvmerge v47.0.0 ('Black Flag') 64-bit
    Writing library                          : libebml v1.3.10 + libmatroska v1.5.2
    IMDB                                     : tt2296747
    TMDB                                     : movie/351192
    
    Video
    ID                                       : 1
    Format                                   : AVC
    Format/Info                              : Advanced Video Codec
    Format profile                           : Main@L4.1
    Format settings                          : CABAC / 4 Ref Frames
    Format settings, CABAC                   : Yes
    Format settings, Reference frames        : 4 frames
    Format settings, GOP                     : M=1, N=12
    Codec ID                                 : V_MPEG4/ISO/AVC
    Duration                                 : 1 h 53 min
    Bit rate mode                            : Variable
    Bit rate                                 : 24.4 Mb/s
    Maximum bit rate                         : 39.6 Mb/s
    Width                                    : 1 920 pixels
    Height                                   : 1 080 pixels
    Display aspect ratio                     : 16:9
    Frame rate mode                          : Constant
    Frame rate                               : 23.976 (24000/1001) FPS
    Color space                              : YUV
    Chroma subsampling                       : 4:2:0
    Bit depth                                : 8 bits
    Scan type                                : Progressive
    Bits/(Pixel*Frame)                       : 0.490
    Stream size                              : 19.2 GiB (85%)
    Title                                    : MPEG-4 AVC Video / 24370 kbps / 1080p / 23.976 fps / 16:9 / Main Profile 4.1
    Language                                 : French
    Default                                  : Yes
    Forced                                   : No
    Color range                              : Limited
    Color primaries                          : BT.709
    Transfer characteristics                 : BT.709
    Matrix coefficients                      : BT.709
    
    Audio #1
    ID                                       : 2
    Format                                   : DTS XLL
    Format/Info                              : Digital Theater Systems
    Commercial name                          : DTS-HD Master Audio
    Codec ID                                 : A_DTS
    Duration                                 : 1 h 53 min
    Bit rate mode                            : Variable
    Bit rate                                 : 3 951 kb/s
    Channel(s)                               : 6 channels
    Channel layout                           : C L R Ls Rs LFE
    Sampling rate                            : 48.0 kHz
    Frame rate                               : 93.750 FPS (512 SPF)
    Bit depth                                : 24 bits
    Compression mode                         : Lossless
    Stream size                              : 3.12 GiB (14%)
    Title                                    : DTS-HD Master Audio / 5.1 / 48 kHz / 3949 kbps / 24-bit
    Language                                 : French
    Default                                  : Yes
    Forced                                   : No
    
    Audio #2
    ID                                       : 3
    Format                                   : AC-3
    Format/Info                              : Audio Coding 3
    Commercial name                          : Dolby Digital
    Codec ID                                 : A_AC3
    Duration                                 : 1 h 53 min
    Bit rate mode                            : Constant
    Bit rate                                 : 448 kb/s
    Channel(s)                               : 2 channels
    Channel layout                           : L R
    Sampling rate                            : 48.0 kHz
    Frame rate                               : 31.250 FPS (1536 SPF)
    Compression mode                         : Lossy
    Stream size                              : 362 MiB (2%)
    Title                                    : Commentary by director Christian Carion
    Language                                 : English
    Service kind                             : Complete Main
    Default                                  : No
    Forced                                   : No
    
    Text #1
    ID                                       : 4
    Format                                   : UTF-8
    Codec ID                                 : S_TEXT/UTF8
    Codec ID/Info                            : UTF-8 Plain Text
    Duration                                 : 1 h 45 min
    Bit rate                                 : 29 b/s
    Count of elements                        : 912
    Stream size                              : 22.6 KiB (0%)
    Language                                 : English
    Default                                  : Yes
    Forced                                   : No
    
    Text #2
    ID                                       : 5
    Format                                   : PGS
    Codec ID                                 : S_HDMV/PGS
    Codec ID/Info                            : Picture based subtitle format used on BDs/HD-DVDs
    Duration                                 : 1 h 45 min
    Bit rate                                 : 26.9 kb/s
    Count of elements                        : 2096
    Stream size                              : 20.3 MiB (0%)
    Title                                    : SDH
    Language                                 : English
    Default                                  : No
    Forced                                   : No
    
    Text #3
    ID                                       : 6
    Format                                   : PGS
    Codec ID                                 : S_HDMV/PGS
    Codec ID/Info                            : Picture based subtitle format used on BDs/HD-DVDs
    Duration                                 : 1 h 42 min
    Bit rate                                 : 6 258 b/s
    Count of elements                        : 530
    Stream size                              : 4.58 MiB (0%)
    Title                                    : Pour le dialogue non français
    Language                                 : French
    Default                                  : No
    Forced                                   : No
    
    Text #4
    ID                                       : 7
    Format                                   : PGS
    Codec ID                                 : S_HDMV/PGS
    Codec ID/Info                            : Picture based subtitle format used on BDs/HD-DVDs
    Duration                                 : 1 h 45 min
    Bit rate                                 : 21.9 kb/s
    Count of elements                        : 1935
    Stream size                              : 16.6 MiB (0%)
    Title                                    : SDH
    Language                                 : French
    Default                                  : No
    Forced                                   : No
    
    Menu
    00:00:00.000                             : en:Communist Propaganda - fr:Propagande communiste
    00:05:13.313                             : en:France, Summer 1939 - fr:France, été 1939
    00:12:31.751                             : en:War - fr:Guerre
    00:20:00.190                             : en:Evacuation - fr:Évacuation
    00:28:14.692                             : en:Council Meeting - fr:Réunion du Conseil
    00:36:43.701                             : en:Wine Cellar - fr:Cave à vin
    00:42:34.550                             : en:Germans - fr:Allemands
    00:49:50.988                             : en:La Fontaine Fable - fr:La Fontaine Fable
    00:58:07.983                             : en:Action! - fr:Action!
    01:08:15.091                             : en:Max! - fr:Max!
    01:16:00.556                             : en:French Resistance - fr:Résistance française
    01:21:52.407                             : en:Papa - fr:Papa
    01:30:45.939                             : en:Going Home - fr:Rentrer à la maison
    01:40:33.527                             : en:Across The River - fr:De l'autre côté de la rivière
    01:46:46.899                             : en:End Credits - fr:Crédits de fin
    
    eac3to v3.34
    command line: "Z:\home\me\eac3to\eac3to.exe" ../EN_MAI_FAIS_CE_QU_IL_TE_PLAIT/ 1) 1: chapters.txt 2: video.h264 3: audio.dtsma 7: french-forced.sup 8: french-sdh.sup -progressnumbers -log=eac3tolog.txt
    ------------------------------------------------------------------------------
    M2TS, 1 video track, 4 audio tracks, 2 subtitle tracks, 1:53:07, 24p /1.001
    1: Chapters, 16 chapters
    2: h264/AVC, 1080p24 /1.001 (16:9)
    3: DTS Master Audio, French, 5.1 channels, 24 bits, 48kHz
       (core: DTS, 5.1 channels, 1509kbps, 48kHz)
    4: DTS Master Audio, French, 2.0 channels, 24 bits, 48kHz
       (core: DTS, 2.0 channels, 768kbps, 48kHz)
    5: DTS, French, 2.0 channels, 768kbps, 48kHz
    6: DTS, French, 2.0 channels, 768kbps, 48kHz
    7: Subtitle (PGS), French
    8: Subtitle (PGS), French
    Creating file "chapters.txt"...
    [v02] Extracting video track number 2...
    [s08] Extracting subtitle track number 8...
    [a03] Extracting audio track number 3...
    [s07] Extracting subtitle track number 7...
    [v02] Creating file "video.h264"...
    [a03] Creating file "audio.dtsma"...
    [s08] Creating file "french-sdh.sup"...
    [s07] Creating file "french-forced.sup"...
    Video track 2 contains 162720 frames.
    Subtitle track 7 contains 265 captions.
    Subtitle track 8 contains 967 captions.
    eac3to processing took 1 minute, 40 seconds.
    Done.
    
    eac3to v3.34
    command line: "Z:\home\me\eac3to\eac3to.exe" "../Come What May 2015 1080p USA Blu-ray AVC DTS-HD MA 5.1-CultFilms/" 1) 1:usa.chapters.txt 4:usa.mainaudio.* -6089ms 5:commentary.* -6089ms 6:english.sup -6089ms -log=comewhatmay.usa.demuxlog.txt
    ------------------------------------------------------------------------------
    M2TS, 1 video track, 3 audio tracks, 1 subtitle track, 1:53:13, 24p /1.001
    1: Chapters, 15 chapters
    2: h264/AVC, 1080p24 /1.001 (16:9)
    3: AC3, French, 5.1 channels, 448kbps, 48kHz
    4: DTS Master Audio, French, 5.1 channels, 24 bits, 48kHz
       (core: DTS, 5.1 channels, 1509kbps, 48kHz)
    5: AC3, English, 2.0 channels, 448kbps, 48kHz
    6: Subtitle (PGS), English
    Creating file "usa.chapters.txt"...
    [s06] Extracting subtitle track number 6...
    [a05] Extracting audio track number 5...
    [a04] Extracting audio track number 4...
    [a05] Applying (E-)AC3 delay...
    [a04] Applying DTS delay...
    [a04] A remaining delay of +1ms could not be fixed.
    [a05] A remaining delay of -9ms could not be fixed.
    [a04] Creating file "usa.mainaudio.dtsma"...
    [a05] Creating file "commentary.ac3"...
    [s06] Creating file "english.sup"...
    Video track 2 contains 162879 frames.
    Subtitle track 6 contains 1048 captions.
    eac3to processing took 1 minute, 21 seconds.
    Done.